import{Q as E,b as B,c as k,d as m,_ as u,e as y}from"./use-quasar-NKguVp3G.js";import{r as o,o as C,a1 as S,Q as V,f as a,R as l,F as w,U as f,V as b,W as N}from"./index-CTaoeIRm.js";import{Q as q}from"./QTd-BjFd9mmy.js";import{Q as v}from"./QTable-BdI5O9ET.js";import{Q as D}from"./QPage-DT0_AJTS.js";import{a as h}from"./index-B9ygI19o.js";import"./format-DuTBLe_H.js";import"./QList-YIeyOEZU.js";const I={class:"q-pb-md q-gutter-sm"},T={class:"q-gutter-md"},O={__name:"AppExplorer",setup($){const c=B(),d=o([]),r=o(null),t=o(null),i=o([]),p=o([]),g=[{align:"left",name:"name",label:"Name",field:"name",sortable:!0},{align:"left",name:"ID",label:"ID",field:"ID",sortable:!0},{align:"left",name:"snapshotCount",label:"Snapshot Count",field:e=>e.installedSnapshots?e.installedSnapshots.length:0,sortable:!0},{align:"left",name:"branch",label:"Branch",field:"defaultVersion",sortable:!0},{align:"left",name:"actions",label:"Action"}],_=[{align:"left",name:"name",label:"Name",field:"name",sortable:!0},{align:"left",name:"ID",label:"ID",field:"ID",sortable:!0},{align:"left",name:"active",label:"Active",field:"active",sortable:!0},{align:"left",name:"branchName",label:"Branch",field:"branchName",sortable:!0}],Q=()=>{t.value.start(),h({method:"GET",url:"/api/accounts"}).then(e=>{d.value=e.data}).catch(e=>{c.notify("Error loading envs"),console.error(e)}).finally(()=>{t.value.stop()})};C(()=>{Q()});const A=()=>{t.value.start(),h({method:"POST",url:"/api/apps",data:r.value}).then(e=>{e.data.data.processAppsList&&(i.value=e.data.data.processAppsList,console.log(i.value))}).catch(e=>{c.notify("Error getting apps"),console.error(e)}).finally(()=>{t.value.stop()})},x=e=>{e&&(p.value=e,console.log(p.value))};return(e,s)=>(V(),S(w,null,[a(E,{ref_key:"bar",ref:t,position:"top",size:"10px","skip-hijack":""},null,512),a(D,{class:"q-pa-md q-gutter-md"},{default:l(()=>[f("div",I,[a(k,null,{default:l(()=>[a(m,{label:"Home",to:"/"}),a(m,{label:"Application Explorer"})]),_:1})]),a(u,{title:"Application Explorer"},{default:l(()=>[f("div",T,[a(y,{filled:"",modelValue:r.value,"onUpdate:modelValue":s[0]||(s[0]=n=>r.value=n),options:d.value,label:"Enviroment","option-label":"title"},null,8,["modelValue","options"]),a(b,{color:"primary",unelevated:"",onClick:A},{default:l(()=>[...s[1]||(s[1]=[N("Get Apps",-1)])]),_:1})])]),_:1}),a(u,{title:"Applications"},{default:l(()=>[a(v,{flat:"",bordered:"",columns:g,rows:i.value},{"body-cell-actions":l(n=>[a(q,{props:n},{default:l(()=>[a(b,{icon:"search",flat:"",color:"primary",onClick:j=>x(n.row.installedSnapshots)},null,8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows"])]),_:1}),a(u,{title:"Snapshots"},{default:l(()=>[a(v,{flat:"",bordered:"",columns:_,rows:p.value},null,8,["rows"])]),_:1})]),_:1})],64))}};export{O as default};
