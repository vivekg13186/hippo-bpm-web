import{Q as E,b as T,c as B,d as m,_ as c,f as y}from"./use-quasar-DGea8EUG.js";import{r as o,o as C,a2 as S,Q as V,f as a,R as l,F as w,U as f,V as b,W as N}from"./index-CB_lE9J2.js";import{Q as q}from"./QTd-B6-qAXmn.js";import{Q as v}from"./QTable-Rvq-NHtA.js";import{Q as A}from"./QPage-C3en1NF8.js";import{a as h}from"./index-B9ygI19o.js";import"./format-BdEEoX9s.js";import"./QList-CjZINhr-.js";const D={class:"q-pb-md q-gutter-sm"},I={class:"q-gutter-md"},O={__name:"ToolkitExplorer",setup($){const p=T(),d=o([]),r=o(null),t=o(null),i=o([]),u=o([]),g=[{align:"left",name:"name",label:"Name",field:"name",sortable:!0},{align:"left",name:"ID",label:"ID",field:"ID",sortable:!0},{align:"left",name:"snapshotCount",label:"Snapshot Count",field:e=>e.installedSnapshots?e.installedSnapshots.length:0,sortable:!0},{align:"left",name:"branch",label:"Branch",field:"defaultVersion",sortable:!0},{align:"left",name:"actions",label:"Action"}],_=[{align:"left",name:"name",label:"Name",field:"name",sortable:!0},{align:"left",name:"ID",label:"ID",field:"ID",sortable:!0},{align:"left",name:"active",label:"Active",field:"active",sortable:!0},{align:"left",name:"branchName",label:"Branch",field:"branchName",sortable:!0}],k=()=>{t.value.start(),h({method:"GET",url:"/api/accounts"}).then(e=>{d.value=e.data}).catch(e=>{p.notify("Error loading envs"),console.error(e)}).finally(()=>{t.value.stop()})};C(()=>{k()});const Q=()=>{t.value.start(),h({method:"POST",url:"/api/toolkits",data:r.value}).then(e=>{e.data.data.processAppsList&&(i.value=e.data.data.processAppsList,console.log(i.value))}).catch(e=>{p.notify("Error getting apps"),console.error(e)}).finally(()=>{t.value.stop()})},x=e=>{e&&(u.value=e,console.log(u.value))};return(e,s)=>(V(),S(w,null,[a(E,{ref_key:"bar",ref:t,position:"top",size:"10px","skip-hijack":""},null,512),a(A,{class:"q-pa-md q-gutter-md"},{default:l(()=>[f("div",D,[a(B,null,{default:l(()=>[a(m,{label:"Home",to:"/"}),a(m,{label:"Toolkit Explorer"})]),_:1})]),a(c,{title:"Toolkit Explorer"},{default:l(()=>[f("div",I,[a(y,{filled:"",modelValue:r.value,"onUpdate:modelValue":s[0]||(s[0]=n=>r.value=n),options:d.value,label:"Enviroment","option-label":"title"},null,8,["modelValue","options"]),a(b,{color:"primary",unelevated:"",onClick:Q},{default:l(()=>[...s[1]||(s[1]=[N("Get Toolkits",-1)])]),_:1})])]),_:1}),a(c,{title:"Toolkits"},{default:l(()=>[a(v,{flat:"",bordered:"",columns:g,rows:i.value},{"body-cell-actions":l(n=>[a(q,{props:n},{default:l(()=>[a(b,{icon:"search",flat:"",color:"primary",onClick:j=>x(n.row.installedSnapshots)},null,8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows"])]),_:1}),a(c,{title:"Snapshots"},{default:l(()=>[a(v,{flat:"",bordered:"",columns:_,rows:u.value},null,8,["rows"])]),_:1})]),_:1})],64))}};export{O as default};
