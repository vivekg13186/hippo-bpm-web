import{g as L,e as P,Q as T,b as $,c as K,d as x,_,f as M,h as U}from"./use-quasar-DGea8EUG.js";import{k as j,c as B,h as F,O as G,y as O,a1 as z,r as f,o as H,a2 as J,Q as d,f as l,R as t,F as R,U as q,V as k,W as c,J as m,P as p}from"./index-CB_lE9J2.js";import{Q}from"./QTd-B6-qAXmn.js";import{Q as A}from"./QTable-Rvq-NHtA.js";import{Q as b,n as g}from"./format-BdEEoX9s.js";import{Q as W}from"./QList-CjZINhr-.js";import{Q as Y}from"./QPage-C3en1NF8.js";import{a as C}from"./index-B9ygI19o.js";const X=["top","middle","bottom"],E=j({name:"QBadge",props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:e=>X.includes(e)}},setup(e,{slots:o}){const r=B(()=>e.align!==void 0?{verticalAlign:e.align}:null),i=B(()=>{const s=e.outline===!0&&e.color||e.textColor;return`q-badge flex inline items-center no-wrap q-badge--${e.multiLine===!0?"multi":"single"}-line`+(e.outline===!0?" q-badge--outline":e.color!==void 0?` bg-${e.color}`:"")+(s!==void 0?` text-${s}`:"")+(e.floating===!0?" q-badge--floating":"")+(e.rounded===!0?" q-badge--rounded":"")+(e.transparent===!0?" q-badge--transparent":"")});return()=>F("div",{class:i.value,style:r.value,role:"status","aria-label":e.label},G(o.default,e.label!==void 0?[e.label]:[]))}});function S(e){if(e===!1)return 0;if(e===!0||e===void 0)return 1;const o=parseInt(e,10);return isNaN(o)?0:o}const v=O({name:"close-popup",beforeMount(e,{value:o}){const r={depth:S(o),handler(i){r.depth!==0&&setTimeout(()=>{const s=L(e);s!==void 0&&P(s,i,r.depth)})},handlerKey(i){z(i,13)===!0&&r.handler(i)}};e.__qclosepopup=r,e.addEventListener("click",r.handler),e.addEventListener("keyup",r.handlerKey)},updated(e,{value:o,oldValue:r}){o!==r&&(e.__qclosepopup.depth=S(o))},beforeUnmount(e){const o=e.__qclosepopup;e.removeEventListener("click",o.handler),e.removeEventListener("keyup",o.handlerKey),delete e.__qclosepopup}}),Z={class:"q-pb-md q-gutter-sm"},ee={class:"q-gutter-md"},de={__name:"AppExplorer",setup(e){const o=$(),r=f([]),i=f(null),s=f(null),h=f([]),y=f([]),w=[{align:"left",name:"name",label:"Name",field:"name",sortable:!0},{align:"left",name:"ID",label:"ID",field:"ID",sortable:!0},{align:"left",name:"snapshotCount",label:"Snapshot Count",field:n=>n.installedSnapshots?n.installedSnapshots.length:0,sortable:!0},{align:"left",name:"branch",label:"Branch",field:"defaultVersion",sortable:!0},{align:"left",name:"actions",label:"Action"}],D=[{align:"left",name:"name",label:"Name",field:"name",sortable:!0},{align:"left",name:"ID",label:"ID",field:"ID",sortable:!0},{align:"left",name:"active",label:"Active",field:"active",sortable:!0},{align:"left",name:"branchName",label:"Branch",field:"branchName",sortable:!0},{align:"left",name:"actions",label:"Action"}],N=()=>{s.value.start(),C({method:"GET",url:"/api/accounts"}).then(n=>{r.value=n.data}).catch(n=>{o.notify("Error loading envs"),console.error(n)}).finally(()=>{s.value.stop()})};H(()=>{N()});const V=()=>{s.value.start(),C({method:"POST",url:"/api/apps",data:i.value}).then(n=>{n.data.data.processAppsList&&(h.value=n.data.data.processAppsList,console.log(h.value))}).catch(n=>{o.notify("Error getting apps"),console.error(n)}).finally(()=>{s.value.stop()})},I=n=>{n&&(y.value=n,console.log(y.value))};return(n,a)=>(d(),J(R,null,[l(T,{ref_key:"bar",ref:s,position:"top",size:"10px","skip-hijack":""},null,512),l(Y,{class:"q-pa-md q-gutter-md"},{default:t(()=>[q("div",Z,[l(K,null,{default:t(()=>[l(x,{label:"Home",to:"/"}),l(x,{label:"Application Explorer"})]),_:1})]),l(_,{title:"Application Explorer"},{default:t(()=>[q("div",ee,[l(M,{filled:"",modelValue:i.value,"onUpdate:modelValue":a[0]||(a[0]=u=>i.value=u),options:r.value,label:"Enviroment","option-label":"title"},null,8,["modelValue","options"]),l(k,{color:"primary",unelevated:"",onClick:V},{default:t(()=>[...a[1]||(a[1]=[c("Get Apps",-1)])]),_:1})])]),_:1}),l(_,{title:"Applications"},{default:t(()=>[l(A,{flat:"",bordered:"",columns:w,rows:h.value},{"body-cell-actions":t(u=>[l(Q,{props:u},{default:t(()=>[l(k,{icon:"search",flat:"",color:"primary",onClick:te=>I(u.row.installedSnapshots)},null,8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows"])]),_:1}),l(_,{title:"Snapshots"},{default:t(()=>[l(A,{flat:"",bordered:"",columns:D,rows:y.value},{"body-cell-active":t(u=>[l(Q,{props:u},{default:t(()=>[u.row.active?(d(),p(E,{key:0,color:"primary",outline:""},{default:t(()=>[...a[2]||(a[2]=[c(" Yes ",-1)])]),_:1})):(d(),p(E,{key:1,color:"warning",outline:""},{default:t(()=>[...a[3]||(a[3]=[c(" No ",-1)])]),_:1}))]),_:2},1032,["props"])]),"body-cell-actions":t(u=>[l(Q,{props:u},{default:t(()=>[l(k,{icon:"more_vert",flat:"",color:"primary"},{default:t(()=>[l(U,null,{default:t(()=>[l(W,{style:{"min-width":"100px"}},{default:t(()=>[m((d(),p(b,{clickable:""},{default:t(()=>[l(g,null,{default:t(()=>[...a[4]||(a[4]=[c("View toolkits",-1)])]),_:1})]),_:1})),[[v]]),m((d(),p(b,{clickable:""},{default:t(()=>[l(g,null,{default:t(()=>[...a[5]||(a[5]=[c("Activate",-1)])]),_:1})]),_:1})),[[v]]),m((d(),p(b,{clickable:""},{default:t(()=>[l(g,null,{default:t(()=>[...a[6]||(a[6]=[c("De Activate",-1)])]),_:1})]),_:1})),[[v]]),m((d(),p(b,{clickable:""},{default:t(()=>[l(g,null,{default:t(()=>[...a[7]||(a[7]=[c("Archive",-1)])]),_:1})]),_:1})),[[v]]),m((d(),p(b,{clickable:""},{default:t(()=>[l(g,null,{default:t(()=>[...a[8]||(a[8]=[c("Delete",-1)])]),_:1})]),_:1})),[[v]])]),_:1})]),_:1})]),_:1})]),_:1},8,["props"])]),_:1},8,["rows"])]),_:1}),l(_,{title:"Toolkits Dependencies"})]),_:1})],64))}};export{de as default};
