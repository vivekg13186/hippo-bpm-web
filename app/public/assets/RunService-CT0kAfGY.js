import{Q as J,b as R,c as D,d as E,_ as U,f as $,e as w}from"./use-quasar-kNEBc_CO.js";import{k as P,g as F,r as s,c as h,w as I,q as G,h as C,l as T,z as L,D as H,aa as K,o as W,S as X,G as Y,f as r,H as y,F as Z,J as S,Q as k,K as M,M as j}from"./index-BT8W_yY-.js";import{T as ee}from"./TouchPan-CMrL50rP.js";import{a as te,c as ae}from"./format-KGvz3g8e.js";import{Q as le}from"./QPage-7VN9ij79.js";import{C as A}from"./CodeEditor-BVvShbie.js";import{a as O}from"./index-B9ygI19o.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const re=P({name:"QSplitter",props:{...te,modelValue:{type:Number,required:!0},reverse:Boolean,unit:{type:String,default:"%",validator:e=>["%","px"].includes(e)},limits:{type:Array,validator:e=>e.length!==2||typeof e[0]!="number"||typeof e[1]!="number"?!1:e[0]>=0&&e[0]<=e[1]},emitImmediately:Boolean,horizontal:Boolean,disable:Boolean,beforeClass:[Array,String,Object],afterClass:[Array,String,Object],separatorClass:[Array,String,Object],separatorStyle:[Array,String,Object]},emits:["update:modelValue"],setup(e,{slots:m,emit:f}){const{proxy:{$q:i}}=F(),q=ae(e,i),o=s(null),v={before:s(null),after:s(null)},p=h(()=>`q-splitter no-wrap ${e.horizontal===!0?"q-splitter--horizontal column":"q-splitter--vertical row"} q-splitter--${e.disable===!0?"disabled":"workable"}`+(q.value===!0?" q-splitter--dark":"")),n=h(()=>e.horizontal===!0?"height":"width"),b=h(()=>e.reverse!==!0?"before":"after"),u=h(()=>e.limits!==void 0?e.limits:e.unit==="%"?[10,90]:[50,1/0]);function d(a){return(e.unit==="%"?a:Math.round(a))+e.unit}const V=h(()=>({[b.value]:{[n.value]:d(e.modelValue)}}));let x,_,N,z,c;function Q(a){if(a.isFirst===!0){const B=o.value.getBoundingClientRect()[n.value];x=e.horizontal===!0?"up":"left",_=e.unit==="%"?100:B,N=Math.min(_,u.value[1],Math.max(u.value[0],e.modelValue)),z=(e.reverse!==!0?1:-1)*(e.horizontal===!0?1:i.lang.rtl===!0?-1:1)*(e.unit==="%"?B===0?0:100/B:1),o.value.classList.add("q-splitter--active");return}if(a.isFinal===!0){c!==e.modelValue&&f("update:modelValue",c),o.value.classList.remove("q-splitter--active");return}const g=N+z*(a.direction===x?-1:1)*a.distance[e.horizontal===!0?"y":"x"];c=Math.min(_,u.value[1],Math.max(u.value[0],g)),v[b.value].value.style[n.value]=d(c),e.emitImmediately===!0&&e.modelValue!==c&&f("update:modelValue",c)}const l=h(()=>[[ee,Q,void 0,{[e.horizontal===!0?"vertical":"horizontal"]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}]]);function t(a,g){a<g[0]?f("update:modelValue",g[0]):a>g[1]&&f("update:modelValue",g[1])}return I(()=>e.modelValue,a=>{t(a,u.value)}),I(()=>e.limits,()=>{G(()=>{t(e.modelValue,u.value)})}),()=>{const a=[C("div",{ref:v.before,class:["q-splitter__panel q-splitter__before"+(e.reverse===!0?" col":""),e.beforeClass],style:V.value.before},T(m.before)),C("div",{class:["q-splitter__separator",e.separatorClass],style:e.separatorStyle,"aria-disabled":e.disable===!0?"true":void 0},[L("div",{class:"q-splitter__separator-area absolute-full"},T(m.separator),"sep",e.disable!==!0,()=>l.value)]),C("div",{ref:v.after,class:["q-splitter__panel q-splitter__after"+(e.reverse===!0?"":" col"),e.afterClass],style:V.value.after},T(m.after))];return C("div",{class:p.value,ref:o},H(m.default,a))}}}),oe={class:"q-pb-md q-gutter-sm"},ue={class:"q-gutter-md"},se={class:"q-pa-md"},ie={class:"q-pa-md"},be={__name:"RunService",setup(e){const m=K(),f=s(50),i=R(),q=s([]),o=s(null),v=s(null),p=s(""),n=s(""),b=s(""),u=s(""),d=s(""),V=s(m.params.id),x=()=>{o.value.start(),O({method:"GET",url:"/api/accounts"}).then(l=>{q.value=l.data}).catch(l=>{i.notify("Error loading envs"),console.error(l)}).finally(()=>{o.value.stop()})},_=()=>{try{var l=JSON.parse(u.value);u.value=JSON.stringify(l,null,2)}catch(t){console.error(t),i.notify("Invalid JSON");return}},N=()=>{try{var l=JSON.parse(d.value);d.value=JSON.stringify(l,null,2)}catch(t){console.error(t),i.notify("Invalid JSON");return}},z=l=>{o.value.start(),O({method:"GET",url:"/api/tests/"+l}).then(t=>{const a=t.data;b.value=a.title,p.value=a.appName,n.value=a.serviceName,u.value=a.input}).catch(t=>{i.notify("Error loading test service"),console.error(t)}).finally(()=>{o.value.stop()})};W(()=>{x(),z(m.params.id)});const c=()=>{if(!v.value){i.notify("Select a env");return}o.value.start(),O({method:"POST",url:"/api/executeService",data:{account:v.value,testService:{id:V.value,title:b.value,appName:p.value,serviceName:n.value,input:u.value}}}).then(l=>{console.log(l),d.value=JSON.stringify(l.data,null,2)}).catch(l=>{i.notify("Error running service"),console.error(l),d.value=String(l)}).finally(()=>{o.value.stop()})},Q=()=>{o.value.start(),O({method:"PUT",url:"/api/tests",data:{id:V.value,title:b.value,appName:p.value,serviceName:n.value,input:u.value}}).then(l=>{i.notify("Test service saved successfully"),console.log(l)}).catch(l=>{i.notify("Error saving test service"),console.error(l)}).finally(()=>{o.value.stop()})};return(l,t)=>(Y(),X(Z,null,[r(J,{ref_key:"bar",ref:o,position:"top",size:"10px","skip-hijack":""},null,512),r(le,{class:"q-pa-md q-gutter-md"},{default:y(()=>[S("div",oe,[r(D,null,{default:y(()=>[r(E,{label:"Home",to:"/"}),r(E,{label:"Test service",to:"/testService"}),r(E,{label:"Run service"})]),_:1})]),r(U,{title:"Run Service"},{default:y(()=>[S("div",ue,[r($,{filled:"",modelValue:v.value,"onUpdate:modelValue":t[0]||(t[0]=a=>v.value=a),options:q.value,label:"Enviroment","option-label":"title"},null,8,["modelValue","options"]),r(w,{filled:"",label:"App Name",modelValue:p.value,"onUpdate:modelValue":t[1]||(t[1]=a=>p.value=a)},null,8,["modelValue"]),r(w,{filled:"",label:"Service Name",modelValue:n.value,"onUpdate:modelValue":t[2]||(t[2]=a=>n.value=a)},null,8,["modelValue"]),r(k,{color:"primary",unelevated:"",onClick:c},{default:y(()=>[...t[6]||(t[6]=[M("Run",-1)])]),_:1}),r(k,{color:"primary",unelevated:"",onClick:Q},{default:y(()=>[...t[7]||(t[7]=[M("Save",-1)])]),_:1})])]),_:1}),r(re,{modelValue:f.value,"onUpdate:modelValue":t[5]||(t[5]=a=>f.value=a),style:{height:"400px"}},{before:y(()=>[S("div",se,[t[8]||(t[8]=S("div",{class:"text-h6 q-mb-xs"},"Input",-1)),r(k,{color:"primary",dense:"",outline:"",icon:"code",rounded:"",size:"sm",onClick:_}),r(j(A),{languages:[["json"]],modelValue:u.value,"onUpdate:modelValue":t[3]||(t[3]=a=>u.value=a),theme:"a11y-light","font-size":"12px","line-nums":!0,style:{width:"100%"}},null,8,["modelValue"])])]),after:y(()=>[S("div",ie,[t[9]||(t[9]=S("div",{class:"text-h6 q-mb-xs"},"Output",-1)),r(k,{color:"primary",dense:"",outline:"",icon:"code",rounded:"",size:"sm",onClick:N}),r(j(A),{languages:[["json"]],modelValue:d.value,"onUpdate:modelValue":t[4]||(t[4]=a=>d.value=a),theme:"a11y-light","font-size":"12px","line-nums":!0,style:{width:"100%"}},null,8,["modelValue"])])]),_:1},8,["modelValue"])]),_:1})],64))}};export{be as default};
