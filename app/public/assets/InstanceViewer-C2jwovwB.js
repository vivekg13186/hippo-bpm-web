import{Q as x,b as V,c as B,d as c,_ as T,f as E,e as A}from"./use-quasar-Cbnt_2Fx.js";import{r as o,o as N,a2 as S,Q as q,f as n,R as r,F as M,U as l,V as w,W as C,a1 as s}from"./index-DbAAbcwL.js";import{a as P,Q as U}from"./QTable-CAEbHdIv.js";import{Q as $}from"./QTree-DL38GVO4.js";import{Q as j}from"./QPage-BjXwtwLK.js";import{a as I}from"./index-B9ygI19o.js";import{_ as F}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./format-Ca8osF-p.js";import"./QList-Bd86qitD.js";const G={class:"q-pb-md q-gutter-sm"},L={class:"q-gutter-md"},z={class:"q-gutter-md"},H={__name:"InstanceViewer",setup(O){const f=V(),v=o([]),d=o(null),i=o(null),u=o(""),a=o({}),k=[{align:"left",name:"taskName",label:"Task",field:"displayName",sortable:!0},{align:"left",name:"tkiid",label:"ID",field:"tkiid",sortable:!0},{align:"left",name:"state",label:"State",field:"state",sortable:!0},{align:"left",name:"lastModified",label:"Last Modified",field:"lastModificationTime",sortable:!0},{align:"left",name:" completionTime",label:"Completion Time",field:"completionTime",sortable:!0},{align:"left",name:" startTime",label:"Start Time",field:"startTime",sortable:!0},{align:"left",name:"assignedTo",label:"Assigned To",field:"assignedToDisplayName",sortable:!0},{align:"left",name:"closedBy",label:"Closed By",field:"closeByUser",sortable:!0}],b=o([]),y=()=>{var t=a.value.executionTree;t&&t.root&&(b.value=[g(t.root)])},g=t=>{var e=t.children?t.children.map(g):[];return{label:t.tokenId?`${t.name}(tkn:${t.tokenId})`:t.name,children:e}},D=()=>{i.value.start(),a.value={},m.value=[],I({method:"POST",url:"/api/instance/"+u.value,data:d.value}).then(t=>{a.value=t.data.data,console.log(a.value),m.value=t.data.data.tasks,y()}).catch(t=>{f.notify("Error loading instance"),console.error(t)}).finally(()=>{i.value.stop()})},m=o([]),Q=()=>{i.value.start(),I({method:"GET",url:"/api/accounts"}).then(t=>{v.value=t.data}).catch(t=>{f.notify("Error loading envs"),console.error(t)}).finally(()=>{i.value.stop()})};return N(()=>{Q()}),(t,e)=>(q(),S(M,null,[n(x,{ref_key:"bar",ref:i,position:"top",size:"10px","skip-hijack":""},null,512),n(j,{class:"q-pa-md q-gutter-md"},{default:r(()=>[l("div",G,[n(B,null,{default:r(()=>[n(c,{label:"Home",to:"/"}),n(c,{label:"Instance Viewer"})]),_:1})]),n(T,{title:"Application Explorer"},{default:r(()=>[l("div",L,[n(E,{filled:"",modelValue:d.value,"onUpdate:modelValue":e[0]||(e[0]=p=>d.value=p),options:v.value,label:"Enviroment","option-label":"title"},null,8,["modelValue","options"]),n(A,{filled:"",label:"Instance ID",modelValue:u.value,"onUpdate:modelValue":e[1]||(e[1]=p=>u.value=p)},null,8,["modelValue"]),n(w,{color:"primary",unelevated:"",onClick:D},{default:r(()=>[...e[2]||(e[2]=[C("Get Instance",-1)])]),_:1})])]),_:1}),n(T,{title:"Instance Information"},{default:r(()=>[l("div",z,[n(P,{flat:"",bordered:""},{default:r(()=>[l("tbody",null,[l("tr",null,[e[3]||(e[3]=l("td",{class:"hg"},"CreationTime",-1)),l("td",null,s(a.value.creationTime),1),e[4]||(e[4]=l("td",{class:"hg"},"ExecutionState",-1)),l("td",null,s(a.value.executionState),1),e[5]||(e[5]=l("td",{class:"hg"},"State ",-1)),l("td",null,s(a.value.state),1)]),l("tr",null,[e[6]||(e[6]=l("td",{class:"hg"},"Last Modification Time",-1)),l("td",null,s(a.value.lastModificationTime),1),e[7]||(e[7]=l("td",{class:"hg"},"Name",-1)),l("td",null,s(a.value.name),1),e[8]||(e[8]=l("td",{class:"hg"},"Instance ID",-1)),l("td",null,s(a.value.piid),1)]),l("tr",null,[e[9]||(e[9]=l("td",{class:"hg"},"Process AppName",-1)),l("td",null,s(a.value.processAppName),1),e[10]||(e[10]=l("td",{class:"hg"},"Process AppAcronym",-1)),l("td",null,s(a.value.processAppAcronym),1),e[11]||(e[11]=l("td",{class:"hg"},"Process AppID",-1)),l("td",null,s(a.value.processAppID),1)]),l("tr",null,[e[12]||(e[12]=l("td",{class:"hg"},"SnapshotID",-1)),l("td",null,s(a.value.snapshotID),1),e[13]||(e[13]=l("td",{class:"hg"},"BranchID",-1)),l("td",null,s(a.value.branchID),1),e[14]||(e[14]=l("td",{class:"hg"},"Branch Name",-1)),l("td",null,s(a.value.branchName),1)]),l("tr",null,[e[15]||(e[15]=l("td",{class:"hg"},"Instance Error",-1)),l("td",null,s(a.value.instanceError),1),e[16]||(e[16]=l("td",{class:"hg"},"Predicted DueDate",-1)),l("td",null,s(a.value.predictedDueDate),1),e[17]||(e[17]=l("td",{class:"hg"},null,-1)),e[18]||(e[18]=l("td",null,null,-1))])])]),_:1}),n(U,{flat:"",bordered:"",columns:k,rows:m.value},null,8,["rows"])]),e[19]||(e[19]=l("h6",null,"Execution Tree",-1)),n($,{nodes:b.value,"node-key":"label"},null,8,["nodes"])]),_:1})]),_:1})],64))}},ee=F(H,[["__scopeId","data-v-b5a78ae5"]]);export{ee as default};
