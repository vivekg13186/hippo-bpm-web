import{Q as U,b as q,c as x,d as b,f as N,e as Q,_ as F}from"./use-quasar-sB_JnDOa.js";import{r as o,o as C,c as I,S as _,G as i,f as e,H as s,F as g,J as c,Q as L,E as V,U as w,an as D,K as h,V as M}from"./index-Cgg6CY0S.js";import{Q as P}from"./QForm-CnUCZ2Bt.js";import{Q as y,m as k}from"./format-DEQCJbLs.js";import{Q as R}from"./QList-DHH-FTCO.js";import{Q as T}from"./QPage-D0k8eBR5.js";import{a as B}from"./index-B9ygI19o.js";const j={class:"q-pb-md q-gutter-sm"},z={class:"q-gutter-md"},X={__name:"UserDetails",setup(G){const m=o(""),u=o(null),f=o([]),r=o(null),d=q(),p=o([]),E=()=>{if(!u.value){d.notify("Select a env");return}r.value.start(),B({method:"POST",url:"/api/getUserInfo",data:{account:u.value,userName:m.value}}).then(a=>{p.value=a.data.data.memberships}).catch(a=>{d.notify("Error fetching user details"),console.error(a)}).finally(()=>{r.value.stop()})},S=()=>{r.value.start(),B({method:"GET",url:"/api/accounts"}).then(a=>{f.value=a.data}).catch(a=>{d.notify("Error loading envs"),console.error(a)}).finally(()=>{r.value.stop()})};C(()=>{S()});const n=o(""),v=I(()=>{if(!n.value)return p.value;const a=n.value.toLowerCase();return p.value.filter(l=>l.toLowerCase().includes(a))});return(a,l)=>(i(),_(g,null,[e(U,{ref_key:"bar",ref:r,position:"top",size:"10px","skip-hijack":""},null,512),e(T,{class:"q-pa-md q-gutter-md"},{default:s(()=>[c("div",j,[e(x,null,{default:s(()=>[e(b,{label:"Home",to:"/"}),e(b,{label:"User Details"})]),_:1})]),c("div",z,[e(P,{onSubmit:E,onReset:a.onReset,class:"q-gutter-md"},{default:s(()=>[e(N,{filled:"",modelValue:u.value,"onUpdate:modelValue":l[0]||(l[0]=t=>u.value=t),options:f.value,label:"Enviroment","option-label":"title"},null,8,["modelValue","options"]),e(Q,{filled:"",modelValue:m.value,"onUpdate:modelValue":l[1]||(l[1]=t=>m.value=t),label:"Username","lazy-rules":"",rules:[t=>t&&t.length>0||"Please enter user login name"]},null,8,["modelValue","rules"]),e(L,{type:"submit",label:"submit",unelevated:"",color:"primary"})]),_:1},8,["onReset"])]),e(F,{title:"Memberships"},{default:s(()=>[c("div",null,[e(Q,{filled:"",modelValue:n.value,"onUpdate:modelValue":l[2]||(l[2]=t=>n.value=t),label:"Filter memberships",debounce:"300",clearable:""},null,8,["modelValue"]),e(R,{bordered:"",separator:""},{default:s(()=>[(i(!0),_(g,null,D(v.value,t=>(i(),V(y,{key:t},{default:s(()=>[e(k,null,{default:s(()=>[h(M(t),1)]),_:2},1024)]),_:2},1024))),128)),v.value.length===0?(i(),V(y,{key:0},{default:s(()=>[e(k,{class:"text-grey"},{default:s(()=>[...l[3]||(l[3]=[h(" No memberships found ",-1)])]),_:1})]),_:1})):w("",!0)]),_:1})])]),_:1})]),_:1})],64))}};export{X as default};
