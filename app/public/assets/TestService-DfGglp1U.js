import{b as C,Q as w,c as q,d as N,_ as h,e as b}from"./use-quasar-CwnGGC5I.js";import{r as i,o as x,P as B,Q as P,R as r,f as a,U as d,V as m,Y as U}from"./index-ZtLz230j.js";import{Q as A}from"./QForm-BtlIzOjt.js";import{Q as I}from"./QTd-BLQiER4K.js";import{Q as J}from"./QTable-C09ZSPFP.js";import{Q as z}from"./QPage-BN0qGTyt.js";import{a as p}from"./index-B9ygI19o.js";import{C as O}from"./CodeEditor-v1q-fONV.js";import"./format-DIRKa6tb.js";import"./QList-BfvJkDxh.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const $={class:"q-pb-md q-gutter-sm"},D={class:"q-gutter-md"},ee={__name:"TestService",setup(R){const v=i(""),f=i(""),y=i(""),s=i(`
  [ {
      "title": "Test case 1",
      "appName": "App acronym",
      "serviceName": "Service name",
      "input": "{json}"
      } ]
  `),o=i(null),n=C(),S=[{align:"left",name:"title",label:"Title",field:"title",sortable:!0},{align:"left",name:"appName",label:"App Name",field:"appName",sortable:!0},{align:"left",name:"serviceName",label:"Service Name",field:"serviceName",sortable:!0},{align:"left",name:"ID",label:"ID",field:"id"},{align:"left",name:"actions",label:"Action"}],g=i([]);x(()=>{c()});const c=()=>{o.value.start(),p({method:"GET",url:"/api/tests"}).then(l=>{g.value=l.data}).catch(l=>{n.notify("Error fetching accounts"),console.error(l)}).finally(()=>{o.value.stop()})},Q=()=>{try{var l=JSON.parse(s.value);s.value=JSON.stringify(l,null,2)}catch(t){console.error(t),n.notify("Invalid JSON");return}},T=()=>{try{var l=JSON.parse(s.value);l.length||(l=[l]),o.value.start();for(var t=0;t<l.length;t++){const e=l[t];p({method:"PUT",url:"/api/tests",data:e}).then(u=>{console.log(u)}).catch(u=>{n.notify("Error saving test service "+e.title),console.error(u)}),c(),o.value.stop()}}catch(e){console.error(e),n.notify("Invalid JSON"),o.value.stop();return}},V=()=>{o.value.start(),p({method:"PUT",url:"/api/tests",data:{title:v.value,appName:f.value,serviceName:y.value,input:s.value}}).then(l=>{console.log(l)}).catch(l=>{n.notify("Error saving test service"),console.error(l)}).finally(()=>{o.value.stop(),c()})},k=l=>{o.value.start(),p({method:"DELETE",url:`/api/tests/${l}`}).then(()=>{}).catch(t=>{n.notify("Error deleting test service"),console.error(t)}).finally(()=>{o.value.stop(),c()})},_=l=>{console.log("edit ",l)},E=()=>{};return(l,t)=>(P(),B(z,{class:"q-pa-md q-gutter-md"},{default:r(()=>[a(w,{ref_key:"bar",ref:o,position:"top",size:"10px","skip-hijack":""},null,512),d("div",$,[a(q,null,{default:r(()=>[a(N,{label:"Home",to:"/"}),a(N,{label:"Test Service"})]),_:1})]),a(h,{title:"Test Service"},{default:r(()=>[a(A,{onSubmit:V,onReset:E,class:"q-gutter-md"},{default:r(()=>[a(b,{filled:"",modelValue:v.value,"onUpdate:modelValue":t[0]||(t[0]=e=>v.value=e),label:"Title","lazy-rules":"",rules:[e=>e&&e.length>0||"Please type something"]},null,8,["modelValue","rules"]),a(b,{filled:"",modelValue:f.value,"onUpdate:modelValue":t[1]||(t[1]=e=>f.value=e),label:"App Name","lazy-rules":"",rules:[e=>e&&e.length>0||"Please type something"]},null,8,["modelValue","rules"]),a(b,{filled:"",modelValue:y.value,"onUpdate:modelValue":t[2]||(t[2]=e=>y.value=e),label:"Service Name","lazy-rules":"",rules:[e=>e&&e.length>0||"Please type something"]},null,8,["modelValue","rules"]),a(m,{type:"submit",label:"submit",unelevated:"",color:"primary"})]),_:1})]),_:1}),a(h,{title:"Import Test Service"},{default:r(()=>[a(U(O),{languages:[["json"]],modelValue:s.value,"onUpdate:modelValue":t[3]||(t[3]=e=>s.value=e),theme:"a11y-light","font-size":"12px","line-nums":!0,style:{width:"100%"}},null,8,["modelValue"]),t[4]||(t[4]=d("br",null,null,-1)),d("div",D,[a(m,{type:"format",label:"format",unelevated:"",color:"primary",onClick:Q}),a(m,{type:"import",label:"import",unelevated:"",color:"primary",onClick:T})])]),_:1}),t[5]||(t[5]=d("div",{class:"p-ma-md"},"Â ",-1)),a(J,{columns:S,rows:g.value,flat:"",bordered:""},{"body-cell-actions":r(e=>[a(I,{props:e},{default:r(()=>[a(m,{icon:"edit",flat:"",color:"primary",to:"/runService/"+e.row.id,onClick:u=>_(e.row.id)},null,8,["to","onClick"]),a(m,{icon:"delete",flat:"",color:"primary",onClick:u=>k(e.row.id)},null,8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows"])]),_:1}))}};export{ee as default};
