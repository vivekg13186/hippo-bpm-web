import{b as C,Q as w,c as q,d as N,_ as h,e as b}from"./use-quasar-D2pci1K-.js";import{r as n,o as x,P as B,Q as P,R as r,f as a,U as d,Y as U,V as m}from"./index-Ce7StVvi.js";import{Q as A}from"./QForm-Pp5ReWw4.js";import{Q as I}from"./QTd-Y1bEC2af.js";import{Q as J}from"./QTable-C5JjH2vr.js";import{Q as z}from"./QPage-DIzW_2_e.js";import{a as p}from"./index-B9ygI19o.js";import{C as O}from"./CodeEditor-BSGH_lYH.js";import"./format-D_few1_3.js";import"./QList-Cv2jt_L2.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const $={class:"q-pb-md q-gutter-sm"},D={class:"q-gutter-md"},ee={__name:"TestService",setup(R){const v=n(""),f=n(""),y=n(""),i=n(`

  [ {
      "title": "Test case 1",
      "appName": "App acronym",
      "serviceName": "Service name",
      "input": "{json}"
      } ]
  `),o=n(null),s=C(),S=[{align:"left",name:"title",label:"Title",field:"title",sortable:!0},{align:"left",name:"appName",label:"App Name",field:"appName",sortable:!0},{align:"left",name:"serviceName",label:"Service Name",field:"serviceName",sortable:!0},{align:"left",name:"ID",label:"ID",field:"id"},{align:"left",name:"actions",label:"Action"}],g=n([]);x(()=>{c()});const c=()=>{o.value.start(),p({method:"GET",url:"/api/tests"}).then(t=>{g.value=t.data}).catch(t=>{s.notify("Error fetching accounts"),console.error(t)}).finally(()=>{o.value.stop()})},Q=()=>{try{var t=JSON.parse(i.value);i.value=JSON.stringify(t,null,2)}catch(l){console.error(l),s.notify("Invalid JSON");return}},T=()=>{try{var t=JSON.parse(i.value);t.length||(t=[t]),o.value.start();for(var l=0;l<t.length;l++){const e=t[l];p({method:"PUT",url:"/api/tests",data:e}).then(u=>{console.log(u)}).catch(u=>{s.notify("Error saving test service "+e.title),console.error(u)}),c(),o.value.stop()}}catch(e){console.error(e),s.notify("Invalid JSON"),o.value.stop();return}},V=()=>{o.value.start(),p({method:"PUT",url:"/api/tests",data:{title:v.value,appName:f.value,serviceName:y.value,input:"{}"}}).then(t=>{console.log(t)}).catch(t=>{s.notify("Error saving test service"),console.error(t)}).finally(()=>{o.value.stop(),c()})},k=t=>{o.value.start(),p({method:"DELETE",url:`/api/tests/${t}`}).then(()=>{}).catch(l=>{s.notify("Error deleting test service"),console.error(l)}).finally(()=>{o.value.stop(),c()})},_=t=>{console.log("edit ",t)},E=()=>{};return(t,l)=>(P(),B(z,{class:"q-pa-md q-gutter-md"},{default:r(()=>[a(w,{ref_key:"bar",ref:o,position:"top",size:"10px","skip-hijack":""},null,512),d("div",$,[a(q,null,{default:r(()=>[a(N,{label:"Home",to:"/"}),a(N,{label:"Test Service"})]),_:1})]),a(h,{title:"Import Test Service"},{default:r(()=>[a(U(O),{languages:[["json"]],modelValue:i.value,"onUpdate:modelValue":l[0]||(l[0]=e=>i.value=e),theme:"a11y-light","font-size":"12px","line-nums":!0,style:{width:"100%"}},null,8,["modelValue"]),l[4]||(l[4]=d("br",null,null,-1)),d("div",D,[a(m,{type:"format",label:"format",unelevated:"",color:"primary",onClick:Q}),a(m,{type:"import",label:"import",unelevated:"",color:"primary",onClick:T})])]),_:1}),a(h,{title:"Test Service"},{default:r(()=>[a(A,{onSubmit:V,onReset:E,class:"q-gutter-md"},{default:r(()=>[a(b,{filled:"",modelValue:v.value,"onUpdate:modelValue":l[1]||(l[1]=e=>v.value=e),label:"Title","lazy-rules":"",rules:[e=>e&&e.length>0||"Please type something"]},null,8,["modelValue","rules"]),a(b,{filled:"",modelValue:f.value,"onUpdate:modelValue":l[2]||(l[2]=e=>f.value=e),label:"App Name","lazy-rules":"",rules:[e=>e&&e.length>0||"Please type something"]},null,8,["modelValue","rules"]),a(b,{filled:"",modelValue:y.value,"onUpdate:modelValue":l[3]||(l[3]=e=>y.value=e),label:"Service Name","lazy-rules":"",rules:[e=>e&&e.length>0||"Please type something"]},null,8,["modelValue","rules"]),a(m,{type:"submit",label:"submit",unelevated:"",color:"primary"})]),_:1})]),_:1}),l[5]||(l[5]=d("div",{class:"p-ma-md"},"Â ",-1)),a(J,{columns:S,rows:g.value,flat:"",bordered:""},{"body-cell-actions":r(e=>[a(I,{props:e},{default:r(()=>[a(m,{icon:"edit",flat:"",color:"primary",to:"/runService/"+e.row.id,onClick:u=>_(e.row.id)},null,8,["to","onClick"]),a(m,{icon:"delete",flat:"",color:"primary",onClick:u=>k(e.row.id)},null,8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows"])]),_:1}))}};export{ee as default};
