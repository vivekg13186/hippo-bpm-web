import{Q as x,b as I,c as N,d as V,f as T,e as c,_ as U}from"./use-quasar-sB_JnDOa.js";import{r as o,o as F,c as C,S as g,G as m,f as a,H as s,F as y,J as v,Q as D,E as _,U as L,an as P,K as h,V as w}from"./index-Cgg6CY0S.js";import{Q as z}from"./QForm-CnUCZ2Bt.js";import{Q as S,m as k}from"./format-DEQCJbLs.js";import{Q as R}from"./QList-DHH-FTCO.js";import{Q as j}from"./QPage-D0k8eBR5.js";import{a as B}from"./index-B9ygI19o.js";const G={class:"q-pb-md q-gutter-sm"},H={class:"q-gutter-md"},Y={__name:"TeamDetails",setup(M){const d=o(""),i=o(""),n=o(null),b=o([]),r=o(null),p=I(),f=o([]),E=()=>{if(!n.value){p.notify("Select a env");return}r.value.start(),B({method:"POST",url:"/api/getTeamInfo",data:{account:n.value,teamName:d.value,snapshotId:i.value}}).then(t=>{f.value=t.data.data.members}).catch(t=>{p.notify("Error fetching team details"),console.error(t)}).finally(()=>{r.value.stop()})},q=()=>{r.value.start(),B({method:"GET",url:"/api/accounts"}).then(t=>{b.value=t.data}).catch(t=>{p.notify("Error loading envs"),console.error(t)}).finally(()=>{r.value.stop()})};F(()=>{q()});const u=o(""),Q=C(()=>{if(!u.value)return f.value;const t=u.value.toLowerCase();return f.value.filter(l=>l.toLowerCase().includes(t))});return(t,l)=>(m(),g(y,null,[a(x,{ref_key:"bar",ref:r,position:"top",size:"10px","skip-hijack":""},null,512),a(j,{class:"q-pa-md q-gutter-md"},{default:s(()=>[v("div",G,[a(N,null,{default:s(()=>[a(V,{label:"Home",to:"/"}),a(V,{label:"Team Details"})]),_:1})]),v("div",H,[a(z,{onSubmit:E,onReset:t.onReset,class:"q-gutter-md"},{default:s(()=>[a(T,{filled:"",modelValue:n.value,"onUpdate:modelValue":l[0]||(l[0]=e=>n.value=e),options:b.value,label:"Enviroment","option-label":"title"},null,8,["modelValue","options"]),a(c,{filled:"",modelValue:d.value,"onUpdate:modelValue":l[1]||(l[1]=e=>d.value=e),label:"Team name","lazy-rules":"",rules:[e=>e&&e.length>0||"Please enter team name"]},null,8,["modelValue","rules"]),a(c,{filled:"",modelValue:i.value,"onUpdate:modelValue":l[2]||(l[2]=e=>i.value=e),label:"Snapshot ID","lazy-rules":"",rules:[e=>e&&e.length>0||"Please enter snapshot id"]},null,8,["modelValue","rules"]),a(D,{type:"submit",label:"submit",unelevated:"",color:"primary"})]),_:1},8,["onReset"])]),a(U,{title:"Users"},{default:s(()=>[v("div",null,[a(c,{filled:"",modelValue:u.value,"onUpdate:modelValue":l[3]||(l[3]=e=>u.value=e),label:"Filter users",debounce:"300",clearable:""},null,8,["modelValue"]),a(R,{bordered:"",separator:""},{default:s(()=>[(m(!0),g(y,null,P(Q.value,e=>(m(),_(S,{key:e},{default:s(()=>[a(k,null,{default:s(()=>[h(w(e.name),1)]),_:2},1024)]),_:2},1024))),128)),Q.value.length===0?(m(),_(S,{key:0},{default:s(()=>[a(k,{class:"text-grey"},{default:s(()=>[...l[4]||(l[4]=[h(" No users found ",-1)])]),_:1})]),_:1})):L("",!0)]),_:1})])]),_:1})]),_:1})],64))}};export{Y as default};
